# 案例

## Fragment+ViewPager内存泄漏

如果`getItem(position:Int)`使用集合进行获取，则导致集合中的`Fragment`实例无法销毁，导致内存泄漏，改为`return new Fragment()`可解决问题

```kotlin
        vp.adapter = object : FragmentStatePagerAdapter(childFragmentManager) {
            override fun getItem(position: Int): Fragment {
                return getFragmentInstance(text, paths[position])
            }

            override fun getCount(): Int = if (paths.size == titles.size) paths.size else 0

            override fun getPageTitle(position: Int): CharSequence? = titles[position]
        }
```

